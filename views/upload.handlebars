<div id="upload-title">
    <h2>Upload an Image</h2>
</div>

<button id="upload_widget" class="cloudinary-button">Choose an Image</button>
<form action="/upload" class="upload-form" enctype="multipart/form-data" method="post">

    <br>

    <div class="upload-fields">
        <div class="field">
            <label class="label">image_name</label>
            <div class="control">
                <input class="input" id="image-name">
            </div>
        </div>

        <div class="field">
            <label class="label">description</label>
            <div class="control">
                <input class="input" id="image-description">
            </div>
        </div>

        <div class="field">
            <label class="label">category_id</label>
            <div class="control">
                <input class="input" type="integer" id="image-category">
            </div>
        </div>

        <div class="field">
            <label class="label">user_id</label>
            <div class="control">
                <input class="input" type="integer" id="image-user">
            </div>
        </div>

        <div class="field">
            <label class="label">URL</label>
            <div class="control">
                <input class="input" type="input" id="image-url">
            </div>
        </div>

        <button type="submit" class="btn btn-primary" value="Upload">Upload</button>
    </div>
</form>



<script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>

<script type="text/javascript">
    let urlInfo = "";
    const uploadUrl = document.querySelector('#image-url')
    var myWidget = cloudinary.createUploadWidget({
        cloudName: 'dkwiaib2k',
        uploadPreset: 'oaoyjcsn'
    }, (error, result) => {
        if (!error && result && result.event === "success") {
            console.log('Done! Here is the image info: ', result.info.url);
            urlInfo = result.info.url;
            uploadUrl.value = urlInfo;
        }
    }
    )

    document.getElementById("upload_widget").addEventListener("click", function () {
        myWidget.open();
    }, false);
</script>


<script src="./js/upload.js"></script>

</form>